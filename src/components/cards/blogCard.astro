---
import { Image } from "astro:assets";

import type { CollectionEntry } from "astro:content";
import { getReadingTime } from "../../utils/readingTime";
import { formatDate } from "../../utils/formatDate";

interface Props {
  post: CollectionEntry<"blog">;
}

const { post } = Astro.props;

const { data, id } = post;

const { title, description, image, pubDate } = data;

const readingTime = post.body ? getReadingTime(post.body) : "";
console.log(readingTime);
---

<article
  class="relative group overflow-hidden rounded-xl shadow-sm transition hover:shadow-xl"
>
  <Image
    src={image}
    alt={title}
    class="absolute inset-0 h-full w-full object-cover transition ease-in-out duration-300 group-hover:scale-105"
  />

  <div
    class="relative bg-gradient-to-t from-slate-900/60 to-slate-900/10 pt-32 sm:pt-48 lg:pt-64"
  >
    <div class="p-4 sm:p-6">
      <p class="text-xl text-white/90">
        <strong>Tiempo de lectura: </strong>
        {readingTime?.split(" ").slice(1).join(" ")}
      </p>
      <p class="text-xl text-slate-100/90">{formatDate(pubDate)}</p>
      <p class="text-xl text-slate-100/90 mt-2 line-clamp-3">{description}</p>
    </div>
  </div>
</article>
